{% extends 'trainers/base.html' %}

{% block content %}
<form id="add-class-form" method="POST">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="btn btn-primary">Submit</button>
</form>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(document).ready(function() {
    $('#add-class-form').submit(function(event) {
        event.preventDefault(); // Prevent form submission
        var formData = $(this).serialize(); // Serialize form data

        $.ajax({
            type: 'POST',
            url: '{% url "add_class" %}',
            data: formData,
            dataType: 'json',
            success: function(response) {
                if (response.success) {
                    Swal.fire({
                        title: "Success!",
                        text: "Class added successfully!",
                        icon: "success"
                    });
                    // Clear form fields
                    $('#add-class-form')[0].reset();
                } else {
                    // Handle form errors if any
                    console.log(response.errors); // Log errors to console for debugging
                }
            },
            error: function(xhr, errmsg, err) {
                console.log(xhr.status + ": " + xhr.responseText); // Log error message to console
            }
        });
    });
});
</script>

{% endblock %}
